
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Times',
            background-color: #f0f0f0;
            color: #333;
            padding: 20px;
        }
        .game-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .game-header {
            text-align: center;
        }
        .game-instructions, .game-story {
            margin-top: 20px;
        }
        .qutrit-option {
            display: inline-block;
            margin: 10px;
            padding: 10px;
            background-color: #ddd;
            border-radius: 5px;
            cursor: pointer;
        }
        .qutrit-option:hover {
            background-color: #ccc;
        }
        /* Additional styling can be added here */
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-header">DEFENSE OF TEAM BALL LIGHTNING</h1>
            <img src="https://imgur.com/a/km4kJbu" alt="Team Ball Lightning" style="max-width: 100%; height: auto; display: block; margin: 0 auto;">
        <button id="rollDie">Roll the Die</button>
        <p id="dieResult">Result: </p>
        <div class="game-story">
            <!-- Story and choices will be dynamically inserted here based on the player's interaction -->
        </div>
    </div>

    <script>
const quantum = {
    getRandom: function(min, mid, max) {
        if (typeof min !== "number" || typeof mid !== "number" || typeof max !== "number") {
            throw new Error("min, mid, and max must be numbers");
        }
        if (min >= mid || mid >= max) {
            throw new Error("Values must be in order: min < mid < max");
        }

        const buffer = new Uint32Array(1);
        window.crypto.getRandomValues(buffer);
        const normalizedRandom = buffer[0] / (0xFFFFFFFF + 1); // Normalized random number between 0 and 1

        if (normalizedRandom < 0.33) {
            return this.cryptoRandom(min, mid);
        } else if (normalizedRandom < 0.67) {
            return this.cryptoRandom(mid, max);
        } else {
            return this.cryptoRandom(max, max + (max - mid));
        }
    },
    cryptoRandom: function(min, max) {
        const range = max - min;
        const buffer = new Uint32Array(1);
        window.crypto.getRandomValues(buffer);
        return (buffer[0] / (0xFFFFFFFF + 1)) * range + min;
    }
};

const storyLines = [
    `<strong>Chapter 1: The Dismissal</strong><br>
    Just hours before the final presentation, Hamzat is unexpectedly confronted by Scott Greenwald, the executive chairman of the hackathon. Scott accuses Hamzat of being rude and without further explanation, expels him from the competition. Team Ball Lightning is left leaderless and disqualified, their groundbreaking project now in jeopardy.`,
    
    `<strong>Chapter 2: The Search for Truth</strong><br>
    Refusing to accept defeat, Hamzat starts a guerrilla internet activism campaign, gathering signatures for a petition to investigate Reality Hack 501c-3, the organization behind the hackathon. The investigation uncovers three main allegations against Scott: withholding Hamzat's passport, identity-based discrimination, and cheating to eliminate Team Ball Lightning's competitive advantage.`,
    
    `<strong>Chapter 3: The Quantum Dice Rolls</strong><br>
    Now, Hamzat must navigate through a series of challenges to clear his name and restore Team Ball Lightning's honor. Each decision you make will influence the outcome of this story. Will you confront Scott directly, seek support from the hackathon community, or find a way to present your project despite the disqualification?`,
    
    `<strong>Chapter 4: The Revelation</strong><br>
    Depending on your decisions, the story unfolds towards one of several endings. Can Hamzat uncover Scott's motives in trying to hack his hackathon and reveal the truth behind the disqualification? Will Team Ball Lightning's project see the light of day, bringing virtual ball lightning into our physical world?`
];

const endings = {
    "H": `<strong>Ending A (Confrontation):</strong><br>Scott admits to feeling threatened by the potential of Team Ball Lightning's project. He is arrested.`,
    "ùïè": `<strong>Ending B (Community Support):</strong><br>The hackathon community rallies behind Team Ball Lightning, forcing the organizers to allow them back into the competition. Their presentation is a resounding success, earning them the closure they deserved.`,
    "+": `<strong>Ending C (Guerrilla Presentation):</strong><br>The unauthorized demonstration outside the venue captures widespread attention, leading to an impromptu review by the scientific community. Team Ball Lightning is recognized for innovation and determination and groundbreaking science.`
};

let currentLine = 0;
let makingFinalDecision = false; // New variable to track if the next roll decides the ending

document.getElementById('rollDie').addEventListener('click', function() {
    rollQuantumDie();
});

function rollQuantumDie() {
    const resultElement = document.getElementById('dieResult');
    const outcome = quantumDieOutcome();
    resultElement.innerHTML = `Result: ${outcome}`;
    
    // Logic to display the story or ending based on currentLine and makingFinalDecision
    if (currentLine < storyLines.length) {
        document.querySelector('.game-story').innerHTML += `<p>${storyLines[currentLine]}</p>`;
        currentLine++;
        // Check if we've reached the end of storyLines to consider the next roll for an ending
        if (currentLine === storyLines.length) {
            makingFinalDecision = true;
        }
    } else if (makingFinalDecision) {
        // Display the ending based on the outcome
        document.querySelector('.game-story').innerHTML += `<p>${endings[outcome]}</p>`;
        makingFinalDecision = false; // Reset or handle game end
    }
}

function quantumDieOutcome() {
    const result = quantum.getRandom(0, 1, 2);
    console.log(`Random Result: ${result}`); // Debugging line

    let outcome;
    if (result < 1) {
        outcome = 'H';
    } else if (result >= 1 && result < 2) {
        outcome = 'ùïè';
    } else {
        outcome = '+';
    }

    console.log(`Outcome: ${outcome}`); // Debugging line
    return outcome;
}
</script>
</body>
</html>