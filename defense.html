<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defense of Team Ball Lightning</title>
    <style>
        body {
            font-family: 'Times', sans-serif;
            background-color: #f0f0f0;
            color: #333;
            padding: 20px;
        }
        .game-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .game-header {
            text-align: center;
        }
        .game-story {
            margin-top: 20px;
            white-space: pre-wrap;
        }
        #rollDie {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-header">DEFENSE OF TEAM BALL LIGHTNING</h1>
        <img src="https://raw.githubusercontent.com/Hamzatrah/VirtualQuantumPersonalComputer/8c48901fa1f8aa904b04618a9b7f530aaa5abbe7/IMG_6893.png" alt="Team Ball Lightning" style="max-width: 100%; height: auto; display: block; margin: 0 auto;">
        <button id="rollDie">Roll Qutrit Die</button>
        <p id="dieResult">Result: </p>
        <div class="game-story">
            <!-- Story and choices will be dynamically inserted here based on the player's interaction -->
        </div>
    </div>
    <script>
        let timeoutId;
        const longPressDuration = 1000; // Time in milliseconds to consider as a long press

        document.getElementById('rollDie').addEventListener('mousedown', function() {
            timeoutId = setTimeout(showSpecialEnding, longPressDuration);
        });

        document.getElementById('rollDie').addEventListener('mouseup', function() {
            clearTimeout(timeoutId);
        });

        document.getElementById('rollDie').addEventListener('mouseleave', function() {
            clearTimeout(timeoutId);
        });

        const quantum = {
            getRandom: function(min, mid, max) {
                const buffer = new Uint32Array(1);
                window.crypto.getRandomValues(buffer);
                const normalizedRandom = buffer[0] / (0xFFFFFFFF + 1);

                if (normalizedRandom < 0.33) {
                    return this.cryptoRandom(min, mid);
                } else if (normalizedRandom < 0.67) {
                    return this.cryptoRandom(mid, max);
                } else {
                    return this.cryptoRandom(max, max + (max - mid));
                }
            },
            cryptoRandom: function(min, max) {
                const range = max - min;
                const buffer = new Uint32Array(1);
                window.crypto.getRandomValues(buffer);
                return (buffer[0] / (0xFFFFFFFF + 1)) * range + min;
            }
        };

        const storyLines = [
            `<strong>Chapter 1: The Dismissal</strong><br>Moments before the final presentation, Hamzat Incorporated is unexpectedly confronted by Scott Greenwald, the executive chairman of Reality Hack 501c-3. Scott accuses Hamzat of being rude and without further explanation, expels him from the competition.`,
            `<strong>Chapter 2: The Search for Truth</strong><br>Refusing to accept defeat, Hamzat starts a guerrilla internet activism campaign to investigate Reality Hack 501c-3. The investigation uncovers allegations against Scott: withholding Hamzat's passport, identity-based discrimination, and cheating.`,
            `<strong>Chapter 3: The Qutrit Die Rolls</strong><br>Hamzat must navigate through challenges to clear his name and restore Team Ball Lightning's honor. Each decision influences the story's outcome.`,
            `<strong>Chapter 4: The Revelation</strong><br>The story unfolds towards one of several endings. Can Hamzat uncover Scott's motives and reveal the truth? Will Team Ball Lightning's project see the light of day?`
        ];

        const endings = {
            "H": `<strong>Ending A (Confrontation):</strong><br>Confronting Scott, Hamzat exposes the truth. Scott, feeling cornered, admits his wrongdoings.`,
            "ùïè": `<strong>Ending B (Community Support):</strong><br>The community rallies behind Team Ball Lightning, leading to their triumphant return to the competition.`,
            "+": `<strong>Ending C (Guerrilla Presentation):</strong><br>An unauthorized demonstration garners widespread attention, highlighting Team Ball Lightning's innovation.`
        };

        let currentLine = 0;

        function rollQuantumDie() {
            const resultElement = document.getElementById('dieResult');
            const outcome = quantumDieOutcome();
            resultElement.innerHTML = `Result: ${outcome}`;

            if (currentLine < storyLines.length) {
                typeStory(storyLines[currentLine], document.querySelector('.game-story'));
                currentLine++;
            } else {
                typeStory(endings[outcome], document.querySelector('.game-story'));
            }
        }

        function showSpecialEnding() {
            const specialEnding = `<strong>Special Ending:</strong><br>Hamzat, moved by his mother's counsel, chose a path of compassion and mercy towards Scott Greenwald. Despite the betrayal, he saw wisdom in forgiveness, setting a precedent for humanity in the face of adversity.`;
            document.querySelector('.game-story').innerHTML = specialEnding;
        }

        function typeStory(text, target) {
            target.innerHTML = text; // Simplified for demonstration
        }

        function quantumDieOutcome() {
            const outcomes = ["H", "ùïè", "+"];
            return outcomes[Math.floor(Math.random() * outcomes.length)];
        }

        document.getElementById('rollDie').addEventListener('click', rollQuantumDie);
    </script>
</body>
</html>